angular.module("angular-msg",[]);angular.module("angular-msg").directive("msg",[function(){return{restrict:"A",templateUrl:"templates/msg/msg.html",replace:!1,scope:{reference:"@",inline:"=",limitMessages:"="},controller:["$scope","$timeout","msg","msgMessages",function(b,g,k,f){b.referenceId=b.reference||0;f.initDirective(b.referenceId,b.limitMessages);b.msgMessages=f;b.inlineMessage=angular.isDefined(b.inline)?b.inline:k.inlineMessages();b.$watch("limitMessages",function(a){var d=f.directives[b.referenceId];angular.isUndefined(a)||
angular.isUndefined(d)||(d.limitMessages=a)});b.stopTimeoutClose=function(a){a.clickToClose||(angular.forEach(a.promises,function(a){g.cancel(a)}),a.close?f.deleteMessage(a):a.close=!0)};b.alertClasses=function(a){return{"msg-success":"success"===a.severity,"msg-error":"error"===a.severity,icon:!1===a.disableIcons,"alert-dismissable":!a.disableCloseButton}};b.showCountDown=function(a){return!a.disableCountDown&&0<a.ttl};b.wrapperClasses=function(){var a={};a["msg-fixed"]=!b.inlineMessage;a[k.position()]=
!0;return a};b.computeTitle=function(a){return{success:"Success",error:"Error",info:"Information",warn:"Warning"}[a.severity]}}]}}]);angular.module("angular-msg").run(["$templateCache",function(b){void 0===b.get("templates/msg/msg.html")&&b.put("templates/msg/msg.html",'<div class="msg-container" ng-class="wrapperClasses()"><div class="msg-item msg" ng-repeat="message in msgMessages.directives[referenceId].messages" ng-class="alertClasses(message)" ng-click="msgMessages.deleteMessage(message)"><div class="msg-icon"></div><div class="msg-content"><div class="msg-title" ng-show="message.title" ng-bind="message.title"></div><div class="msg-message" ng-bind-html="message.text"></div></div></div></div>')}]);angular.module("angular-msg").provider("msg",function(){var b={success:null,error:null,warning:null,info:null},g="messages",k="text",f="title",a="severity",d=!0,e="variables",t=!1,h="top-right",n=!1,l=!1,q=!1,u=!1,v=!0;this.globalTimeToLive=function(a){if("object"===typeof a)for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);else for(var e in b)b.hasOwnProperty(e)&&(b[e]=a)};this.globalTranslateMessages=function(a){v=a};this.globalDisableCloseButton=function(a){n=a};this.globalDisableIcons=function(a){l=
a};this.globalReversedOrder=function(a){q=a};this.globalDisableCountDown=function(a){u=a};this.messageVariableKey=function(a){e=a};this.globalInlineMessages=function(a){t=a};this.globalPosition=function(a){h=a};this.messagesKey=function(a){g=a};this.messageTextKey=function(a){k=a};this.messageTitleKey=function(a){f=a};this.messageSeverityKey=function(b){a=b};this.onlyUniqueMessages=function(a){d=a};this.serverMessagesInterceptor=["$q","msg",function(a,b){function d(a){void 0!==a&&a.data[g]&&0<a.data[g].length&&
b.addServerMessages(a.data[g])}return{response:function(a){d(a);return a},responseError:function(b){d(b);return a.reject(b)}}}];this.$get=["$rootScope","$interpolate","$sce","$filter","$timeout","msgMessages",function(g,w,x,y,z,p){function A(a){if(r&&a.translateMessage)a.text=r(a.text,a.variables);else{var c=w(a.text);a.text=c(a.variables)}c=p.addMessage(a);g.$broadcast("msgMessage",a);z(function(){},0);return c}function m(a,c,d){c=c||{};var e;e={text:a,title:c.title,severity:d,ttl:c.ttl||b[d],variables:c.variables||
{},disableCloseButton:void 0===c.disableCloseButton?n:c.disableCloseButton,disableIcons:void 0===c.disableIcons?l:c.disableIcons,disableCountDown:void 0===c.disableCountDown?u:c.disableCountDown,position:c.position||h,referenceId:c.referenceId||0,translateMessage:void 0===c.translateMessage?v:c.translateMessage,destroy:function(){p.deleteMessage(e)},setText:function(a){e.text=x.trustAsHtml(String(a))},onclose:c.onclose,onopen:c.onopen};return A(e)}var r;p.onlyUnique=d;p.reverseOrder=q;try{r=y("translate")}catch(B){}return{warning:function(a,
c){return m(a,c,"warning")},error:function(a,c){return m(a,c,"error")},info:function(a,c){return m(a,c,"info")},success:function(a,c){return m(a,c,"success")},general:function(a,c,b){b=(b||"error").toLowerCase();m(a,c,b)},addServerMessages:function(b){if(b&&b.length){var c,d,g,h;h=b.length;for(c=0;c<h;c++)if(d=b[c],d[k]){g=(d[a]||"error").toLowerCase();var l={};l.variables=d[e]||{};l.title=d[f];m(d[k],l,g)}}},onlyUnique:function(){return d},reverseOrder:function(){return q},inlineMessages:function(){return t},
position:function(){return h}}}]});angular.module("angular-msg").service("msgMessages",["$sce","$timeout",function(b,g){function k(a){return f[a]?f[a]:f[a]={messages:[]}}this.directives={};var f={};this.initDirective=function(a,b){f[a]?(this.directives[a]=f[a],this.directives[a].limitMessages=b):this.directives[a]={messages:[],limitMessages:b};return this.directives[a]};this.getAllMessages=function(a){a=a||0;return this.directives[a]?this.directives[a].messages:[]};this.destroyAllMessages=function(a){var b=this.getAllMessages(a),e=
b.length;for(e-1;0<=e;e--)b[e].destroy();this.directives[a]&&(this.directives[a].messages=[])};this.addMessage=function(a){var d,e,f,h;d=this.directives[a.referenceId]?this.directives[a.referenceId]:k(a.referenceId);e=d.messages;if(this.onlyUnique&&(angular.forEach(e,function(d){h=b.getTrustedHtml(d.text);a.text===h&&a.severity===d.severity&&a.title===d.title&&(f=!0)}),f))return;a.text=b.trustAsHtml(String(a.text));a.ttl&&-1!==a.ttl&&(a.countdown=a.ttl/1E3,a.promises=[],a.close=!1,a.countdownFunction=
function(){1<a.countdown?(a.countdown--,a.promises.push(g(a.countdownFunction,1E3))):a.countdown--});if(angular.isDefined(d.limitMessages)){var n=e.length-(d.limitMessages-1);0<n&&e.splice(d.limitMessages-1,n)}this.reverseOrder?e.unshift(a):e.push(a);if("function"===typeof a.onopen)a.onopen();a.ttl&&-1!==a.ttl&&(a.promises.push(g(angular.bind(this,function(){this.deleteMessage(a)}),a.ttl)),a.promises.push(g(a.countdownFunction,1E3)));return a};this.deleteMessage=function(a){var b=this.directives[a.referenceId].messages,
e=b.indexOf(a);-1<e&&(b[e].close=!0,b.splice(e,1));if("function"===typeof a.onclose)a.onclose()}}]);